{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/auth.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"inputName\"];\n\nfunction MenuViewComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23)(2, \"div\", 24);\n    i0.ɵɵelement(3, \"img\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 26)(5, \"h4\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function MenuViewComponent_div_11_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const category_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.addProduct(category_r3);\n    });\n    i0.ɵɵtext(10, \"+\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const category_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", category_r3.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(category_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", category_r3.price, \"\");\n  }\n}\n\nfunction MenuViewComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"div\", 29)(2, \"div\", 30)(3, \"div\", 31);\n    i0.ɵɵelement(4, \"img\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 33)(6, \"h4\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 34)(9, \"div\", 35)(10, \"img\", 36);\n    i0.ɵɵlistener(\"click\", function MenuViewComponent_div_21_Template_img_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const order_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.deleteQty(order_r6);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"img\", 37);\n    i0.ɵɵlistener(\"click\", function MenuViewComponent_div_21_Template_img_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const order_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.addQty(order_r6);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"p\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(16, \"div\", 38)(17, \"img\", 39);\n    i0.ɵɵlistener(\"click\", function MenuViewComponent_div_21_Template_img_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const order_r6 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.deleteProduct(order_r6);\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const order_r6 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", order_r6.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", order_r6.name, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", order_r6.qty, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"$ \", order_r6.totalPrice, \" \");\n  }\n}\n\nexport let MenuViewComponent = /*#__PURE__*/(() => {\n  class MenuViewComponent {\n    constructor(authService) {\n      this.authService = authService;\n      this.categories = [];\n      this.allProducts = [];\n      this.arrOrder = [];\n      this.data = {};\n      this.totalPriceOrder = 0;\n    } // Get products into an array\n\n\n    ngOnInit() {\n      this.authService.getProducts().subscribe({\n        next: response => {\n          this.allProducts = response;\n          this.categories = this.allProducts;\n        },\n        error: error => {\n          console.error('There was an error!', error);\n        }\n      });\n    }\n\n    filterCategories(e) {\n      const type = e.target.dataset.value;\n\n      if (type != '') {\n        this.categories = this.allProducts.filter(element => element.type === type);\n      } else {\n        this.categories = this.allProducts;\n      }\n\n      return this.categories;\n    }\n\n    addProduct(product) {\n      const result = this.arrOrder.find(x => x._id == product._id);\n\n      if (result == undefined) {\n        this.arrOrder.push(Object.assign(Object.assign({}, product), {\n          qty: 1,\n          totalPrice: product.price,\n          totalPriceOrder: 0\n        }));\n      } else {\n        this.arrOrder = this.arrOrder.map(x => x._id == product._id ? Object.assign(Object.assign({}, x), {\n          qty: x.qty + 1,\n          totalPrice: x.price * (x.qty + 1)\n        }) : x);\n      }\n\n      this.arrTotalPrice();\n    }\n\n    addQty(order) {\n      this.arrOrder = this.arrOrder.map(x => x._id == order._id ? Object.assign(Object.assign({}, x), {\n        qty: x.qty + 1,\n        totalPrice: x.price * (x.qty + 1)\n      }) : x);\n      this.arrTotalPrice();\n    }\n\n    deleteQty(order) {\n      if (order.qty != 1) {\n        this.arrOrder = this.arrOrder.map(x => x._id == order._id ? Object.assign(Object.assign({}, x), {\n          qty: x.qty - 1,\n          totalPrice: x.price * (x.qty - 1)\n        }) : x);\n        this.arrTotalPrice();\n      }\n    }\n\n    deleteProduct(product) {\n      this.arrOrder = this.arrOrder.filter(x => x !== product);\n      this.arrTotalPrice();\n    }\n\n    deleteOrder() {\n      this.arrOrder.length = 0;\n      this.totalPriceOrder = 0;\n      this.inputName.nativeElement.value = '';\n    }\n\n    eachProduct() {\n      const detailProductData = this.arrOrder.map(e => {\n        this.data = {\n          qty: e.qty,\n          productId: e._id\n        };\n        return this.data;\n      });\n      return detailProductData;\n    }\n\n    arrTotalPrice() {\n      this.totalPriceOrder = this.arrOrder.map(e => {\n        return e.totalPrice;\n      });\n      return this.totalPriceOrder = this.totalPriceOrder.reduce((acc, num) => acc + num);\n    }\n\n    addNewOrder() {\n      let valueInput = this.inputName.nativeElement.value;\n      const idUser = localStorage.getItem('idUser');\n      const objOrder = {\n        \"userId\": idUser,\n        \"client\": valueInput,\n        \"products\": this.eachProduct()\n      };\n\n      if (valueInput != '') {\n        this.authService.newOrder(objOrder).subscribe({\n          next: response => {\n            localStorage.setItem('idOrder', response._id);\n            Swal.fire({\n              position: 'top-end',\n              icon: 'success',\n              title: 'Your order has been sent! :)',\n              showConfirmButton: false,\n              timer: 1500\n            });\n          },\n          error: error => {\n            console.error(error);\n          },\n          complete: () => {\n            console.log('Request complete');\n          }\n        });\n        this.inputName.nativeElement.value = '';\n        this.arrOrder.length = 0;\n        this.totalPriceOrder = 0;\n      } else {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Something seems to be missing from your order, check it and try again!'\n        });\n      }\n    }\n\n  }\n\n  MenuViewComponent.ɵfac = function MenuViewComponent_Factory(t) {\n    return new (t || MenuViewComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n  };\n\n  MenuViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MenuViewComponent,\n    selectors: [[\"app-menu-view\"]],\n    viewQuery: function MenuViewComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.inputName = _t.first);\n      }\n    },\n    decls: 31,\n    vars: 3,\n    consts: [[1, \"container-menu-view\"], [1, \"section-menu-container-routing\"], [\"data-value\", \"\", 1, \"nav-btns-menu\", 3, \"click\"], [\"data-value\", \"breakfast\", 1, \"nav-menu\"], [\"data-value\", \"lunch\", 1, \"nav-menu\"], [\"data-value\", \"\", 1, \"nav-menu\"], [1, \"menu-container-routing\"], [1, \"food-card-container\"], [\"class\", \"products-container\", 4, \"ngFor\", \"ngForOf\"], [1, \"container-food-order\"], [1, \"food-order-card\"], [1, \"container-position\"], [1, \"container-name\"], [\"type\", \"text\", 1, \"name-client\"], [\"inputName\", \"\"], [1, \"container-product\"], [\"class\", \"order-container\", 4, \"ngFor\", \"ngForOf\"], [1, \"total-container\"], [\"src\", \"../../../../assets/images/Trash.png\", 1, \"img-trash-final\", 3, \"click\"], [1, \"total-and-btn-send\"], [3, \"click\"], [\"src\", \"../../../../assets/images/Icon.png\"], [1, \"products-container\"], [1, \"food-card\"], [1, \"food-img\"], [3, \"src\"], [1, \"food-info\"], [\"type\", \"button\", 1, \"btn-add-product\", 3, \"click\"], [1, \"order-container\"], [1, \"order-list-container\"], [1, \"order\"], [1, \"img-food-order\"], [1, \"img-order\", 3, \"src\"], [1, \"order-info\"], [1, \"add-and-price\"], [1, \"add-or-less\"], [\"src\", \"../../../../assets/images/menos.png\", 3, \"click\"], [\"src\", \"../../../../assets/images/m\\u00E0s.png\", 3, \"click\"], [1, \"plus-trash\"], [\"src\", \"../../../../assets/images/trash-item.png\", 3, \"click\"]],\n    template: function MenuViewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"nav\", 2);\n        i0.ɵɵlistener(\"click\", function MenuViewComponent_Template_nav_click_2_listener($event) {\n          return ctx.filterCategories($event);\n        });\n        i0.ɵɵelementStart(3, \"button\", 3);\n        i0.ɵɵtext(4, \" Breakfast \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 4);\n        i0.ɵɵtext(6, \" Lunch \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 5);\n        i0.ɵɵtext(8, \" All \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7);\n        i0.ɵɵtemplate(11, MenuViewComponent_div_11_Template, 11, 3, \"div\", 8);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"section\", 9)(13, \"div\", 10)(14, \"div\", 11)(15, \"div\", 12)(16, \"h4\");\n        i0.ɵɵtext(17, \"To: \");\n        i0.ɵɵelement(18, \"input\", 13, 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 15);\n        i0.ɵɵtemplate(21, MenuViewComponent_div_21_Template, 18, 4, \"div\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 17)(23, \"div\")(24, \"img\", 18);\n        i0.ɵɵlistener(\"click\", function MenuViewComponent_Template_img_click_24_listener() {\n          return ctx.deleteOrder();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"div\", 19)(26, \"p\");\n        i0.ɵɵtext(27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function MenuViewComponent_Template_button_click_28_listener() {\n          return ctx.addNewOrder();\n        });\n        i0.ɵɵtext(29, \"Send \");\n        i0.ɵɵelement(30, \"img\", 21);\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.arrOrder);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"Total: $\", ctx.totalPriceOrder, \"\");\n      }\n    },\n    directives: [i2.NgForOf],\n    styles: [\"@charset \\\"UTF-8\\\";h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:0}.container-menu-view[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}.section-menu-container-routing[_ngcontent-%COMP%]{flex:2.5;display:flex;flex-direction:column;height:94%;padding:13px}.container-food-order[_ngcontent-%COMP%]{flex:1;height:100%;border-left:1px solid #a09d9d}.btn[_ngcontent-%COMP%]{border-radius:50%;background-image:url(m\\\\e0s.2fe356b65637e983.png);width:40px;height:40px}.food-order-card[_ngcontent-%COMP%]{margin:10px;background-color:#fff;height:92%;padding:22px;border-radius:20px;display:flex;flex-direction:column;justify-content:space-between;align-items:none}@media (min-width: 1000px) and (max-width: 1439px){.food-order-card[_ngcontent-%COMP%]{height:89%}}.order[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.add-and-price[_ngcontent-%COMP%]{border-bottom:1px solid #a09d9d;display:flex;flex-direction:row;justify-content:space-between;align-items:none}.add-or-less[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.add-or-less[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px}.img-order[_ngcontent-%COMP%]{height:70px;max-width:60px}@media (min-width: 1000px) and (max-width: 1439px){.img-order[_ngcontent-%COMP%]{height:50px;max-width:60px}}.plus-trash[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-right:10px;margin-top:8px;width:97%}.order-info[_ngcontent-%COMP%]{width:60%}.container-product[_ngcontent-%COMP%]{overflow-y:scroll;display:flex;flex-direction:column;height:59vh;margin-top:10%}@media (min-width: 1000px) and (max-width: 1439px){.container-product[_ngcontent-%COMP%]{height:52vh}}.container-product[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.container-product[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6b6c6d}.container-product[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.container-position[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-around}\", \".products-container[_ngcontent-%COMP%]{width:20%}.food-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;width:100%;padding:10px;box-shadow:2px 2px 2px 1px #0003}.food-card[_ngcontent-%COMP%]   .food-img[_ngcontent-%COMP%]{display:flex;justify-content:center}.food-card[_ngcontent-%COMP%]   .food-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px}@media (min-width: 1000px) and (max-width: 1439px){.food-card[_ngcontent-%COMP%]   .food-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:52px}}.food-card[_ngcontent-%COMP%]   .food-info[_ngcontent-%COMP%]{text-align:center}.food-card[_ngcontent-%COMP%]   .food-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .food-card[_ngcontent-%COMP%]   .food-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px}.btn-add-product[_ngcontent-%COMP%]{background-color:#78ce1b;color:#fff;border:none;display:flex;justify-content:flex-end;margin-left:80%;border-radius:10%}input[_ngcontent-%COMP%]{border-radius:30px;font-size:16px;border:2.8px solid #F4A42B;width:70%;margin:1.5%;padding-left:3%}input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff0}.name-client[_ngcontent-%COMP%]{margin-left:10%}.container-name[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 769px){.nav-btns-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:30px;padding-top:15px;row-gap:20%}.nav-btns-menu[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{width:40%}.products-container[_ngcontent-%COMP%]{width:30%}.food-card-container[_ngcontent-%COMP%]{display:flex;column-gap:30px;justify-content:space-evenly;margin-left:-16px}.food-card[_ngcontent-%COMP%]{height:125px;width:115px}.food-card[_ngcontent-%COMP%]   .food-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}.name-client[_ngcontent-%COMP%]{margin-left:0}.container-product[_ngcontent-%COMP%]{row-gap:42px}.order-list-container[_ngcontent-%COMP%]{margin-right:5px}.img-order[_ngcontent-%COMP%]{height:40px;max-width:50px}.add-and-price[_ngcontent-%COMP%]{display:flex;flex-direction:column}.total-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.img-trash-final[_ngcontent-%COMP%]{height:32px}.total-and-btn-send[_ngcontent-%COMP%]{display:flex;align-items:flex-end}}\", \".plus-btn[_ngcontent-%COMP%]{border:none;background:none;font-weight:700}.total-container[_ngcontent-%COMP%]{border-top:1px solid #a09d9d;display:flex;flex-direction:none;justify-content:space-between;align-items:center}.order-container[_ngcontent-%COMP%]{margin-top:18px;height:25%}.order-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.order-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6b6c6d}.order-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}@media (min-width: 1000px) and (max-width: 1439px){.order-container[_ngcontent-%COMP%]{height:35%;margin-bottom:12px}}.order-list-container[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:15px}.total-and-btn-send[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:none;align-items:center}.total-and-btn-send[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;padding:7px;border:1px solid #07f01b;background-color:#fff;width:100px;color:green;display:flex;flex-direction:none;justify-content:space-around;align-items:center}.total-and-btn-send[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.nav-btns-menu[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.nav-btns-menu[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{text-align:center;text-decoration:none;color:#000;font-weight:700;width:12%;padding:10px;border:none;border-radius:20px;font-size:15px}.nav-btns-menu[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]:hover{background-color:#fffcf8;color:#4b9eeb;border:1px solid #4b9eeb;border-radius:20px}.menu-container-routing[_ngcontent-%COMP%]{flex:5.5;height:80%}.food-card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;column-gap:60px;overflow-y:scroll;height:100%;justify-content:center;row-gap:60px;padding-top:1%;padding-bottom:2%;overflow-x:hidden}.food-card-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.food-card-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6b6c6d}.food-card-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}\"]\n  });\n  return MenuViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}